"use strict";(self.webpackChunkfoss_guru=self.webpackChunkfoss_guru||[]).push([[4307],{8359:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>p,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"kits/spring-ai/Model/speech-to-text","title":"Spring AI Speech to Text Example","description":"Spring AI currently supports only OpenAI\u2019s and AzureOpenAI\u2019s whisper model for speech transcription to JSON or TEXT files using OpenAiAudioTranscriptionModel class.","source":"@site/community/kits/spring-ai/Model/speech-to-text.md","sourceDirName":"kits/spring-ai/Model","slug":"/kits/spring-ai/Model/speech-to-text","permalink":"/foss-guru/community/kits/spring-ai/Model/speech-to-text","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"speech-to-text","title":"Spring AI Speech to Text Example","description":"Spring AI currently supports only OpenAI\u2019s and AzureOpenAI\u2019s whisper model for speech transcription to JSON or TEXT files using OpenAiAudioTranscriptionModel class.","sidebar_position":4},"sidebar":"community","previous":{"title":"Spring AI SpeechModel (Text-to-Speech)","permalink":"/foss-guru/community/kits/spring-ai/Model/speech-model"},"next":{"title":"Python Kit","permalink":"/foss-guru/community/category/python-kit"}}');var r=i(4848),o=i(8453);const s={id:"speech-to-text",title:"Spring AI Speech to Text Example",description:"Spring AI currently supports only OpenAI\u2019s and AzureOpenAI\u2019s whisper model for speech transcription to JSON or TEXT files using OpenAiAudioTranscriptionModel class.",sidebar_position:4},a=void 0,p={},l=[{value:"\ud83c\udfa4 Spring AI Whisper Model: Speech-to-Text Magic! \ud83d\ude80",id:"-spring-ai-whisper-model-speech-to-text-magic-",level:2},{value:"1\ufe0f\u20e3 Getting Started: Let\u2019s Transcribe Like a Pro! \ud83c\udf99\ufe0f",id:"1\ufe0f\u20e3-getting-started-lets-transcribe-like-a-pro-\ufe0f",level:2},{value:"\ud83d\udd27 First Things First: Add This Dependency",id:"-first-things-first-add-this-dependency",level:3},{value:"\ud83d\udd25 Autoconfiguration Magic",id:"-autoconfiguration-magic",level:3},{value:"\ud83d\udcdc Choose Your Format",id:"-choose-your-format",level:3},{value:"\ud83c\udf9b\ufe0f More Configuration Options",id:"\ufe0f-more-configuration-options",level:3},{value:"\ud83c\udfd7\ufe0f Inject the Transcription Model Into Your Spring App",id:"\ufe0f-inject-the-transcription-model-into-your-spring-app",level:3},{value:"2\ufe0f\u20e3 Manual Configuration: Take Control! \ud83c\udf9b\ufe0f",id:"2\ufe0f\u20e3-manual-configuration-take-control-\ufe0f",level:2},{value:"3\ufe0f\u20e3 Speech-to-Text Transcription Example \ud83c\udfa4\u27a1\ufe0f\ud83d\udcdc",id:"3\ufe0f\u20e3-speech-to-text-transcription-example-\ufe0f",level:2},{value:"4\ufe0f\u20e3 Summary: What We Learned Today \ud83c\udf93",id:"4\ufe0f\u20e3-summary-what-we-learned-today-",level:2}];function c(e){const n={code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Banner Spring AI Icon",src:i(9666).A+"",width:"1022",height:"239"})}),"\n",(0,r.jsx)(n.h2,{id:"-spring-ai-whisper-model-speech-to-text-magic-",children:"\ud83c\udfa4 Spring AI Whisper Model: Speech-to-Text Magic! \ud83d\ude80"}),"\n",(0,r.jsx)(n.p,{children:"Spring AI currently plays nice with OpenAI\u2019s and AzureOpenAI\u2019s Whisper model for turning your multilingual speech into transcribed text (JSON or TEXT format). Wanna stay updated on the latest models? Check out OpenAI\u2019s site! \ud83e\uddd9\u200d\u2642\ufe0f\u2728"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1\ufe0f\u20e3-getting-started-lets-transcribe-like-a-pro-\ufe0f",children:"1\ufe0f\u20e3 Getting Started: Let\u2019s Transcribe Like a Pro! \ud83c\udf99\ufe0f"}),"\n",(0,r.jsxs)(n.p,{children:["Since Spring AI is all about OpenAI models right now, we roll with ",(0,r.jsx)(n.code,{children:"OpenAiAudioTranscriptionModel"})," to convert audio files into text. If Spring AI gets more transcription buddies in the future, we\u2019ll extract a common ",(0,r.jsx)(n.code,{children:"AudioTranscriptionModel"})," interface."]}),"\n",(0,r.jsx)(n.h3,{id:"-first-things-first-add-this-dependency",children:"\ud83d\udd27 First Things First: Add This Dependency"}),"\n",(0,r.jsxs)(n.p,{children:["Before diving in, make sure you add the ",(0,r.jsx)(n.code,{children:"spring-ai-openai-spring-boot-starter"})," dependency to your project. Trust me, it\u2019s the secret sauce! \ud83c\udfd7\ufe0f"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<dependency>\n  <groupId>org.springframework.ai</groupId>\n  <artifactId>spring-ai-openai-spring-boot-starter</artifactId>\n</dependency>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"-autoconfiguration-magic",children:"\ud83d\udd25 Autoconfiguration Magic"}),"\n",(0,r.jsxs)(n.p,{children:["Spring Boot\u2019s auto-config does the heavy lifting, creating an ",(0,r.jsx)(n.code,{children:"OpenAiAudioTranscriptionModel"})," instance with these default settings:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"# \ud83d\udd11 API Key - Don\u2019t forget this one!\nspring.ai.openai.api-key=${OPENAI_API_KEY}  \n\n# \ud83c\udf99\ufe0f Default Configuration\nspring.ai.openai.audio.transcription.options.model=whisper-1\nspring.ai.openai.audio.transcription.options.response-format=json  # json, text, srt, verbose_json or vtt\nspring.ai.openai.audio.transcription.options.temperature=0  # sampling temperature, between 0 and 1\nspring.ai.openai.audio.transcription.options.timestamp_granularities=segment  # segment or word (or both)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"-choose-your-format",children:"\ud83d\udcdc Choose Your Format"}),"\n",(0,r.jsx)(n.p,{children:"Pick your flavor of transcription output:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"json"}),": Structured response format (for the nerds \ud83e\udd13)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"text"}),": Plain ol\u2019 text (classic!)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"srt"}),": Subtitle file format \ud83c\udfac"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"verbose_json"}),": More metadata than you\u2019ll ever need"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"vtt"}),": Perfect for web video captions \ud83d\udda5\ufe0f"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\ufe0f-more-configuration-options",children:"\ud83c\udf9b\ufe0f More Configuration Options"}),"\n",(0,r.jsx)(n.p,{children:"Want to get fancy? Customize your transcription output with these:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:'# \ud83d\udcdd Guide the model\u2019s style or continue a previous segment\nspring.ai.openai.audio.transcription.options.prompt={prompt}  \n\n# \ud83c\udf0d Language setting (ISO-639-1 format, e.g., "en")\nspring.ai.openai.audio.transcription.options.language={language}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\ufe0f-inject-the-transcription-model-into-your-spring-app",children:"\ud83c\udfd7\ufe0f Inject the Transcription Model Into Your Spring App"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@RestController\nclass TranscriptionController {\n\n  private final OpenAiAudioTranscriptionModel transcriptionModel;\n\n  TranscriptionController(OpenAiAudioTranscriptionModel transcriptionModel) {\n    this.transcriptionModel = transcriptionModel;\n  }\n\n  // handler methods\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2\ufe0f\u20e3-manual-configuration-take-control-\ufe0f",children:"2\ufe0f\u20e3 Manual Configuration: Take Control! \ud83c\udf9b\ufe0f"}),"\n",(0,r.jsx)(n.p,{children:"You\u2019re a DIYer? No problem! Just need the API key:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'var openAiAudioApi = new OpenAiAudioApi(System.getenv("OPENAI_API_KEY"));\nvar transcriptionModel = new OpenAiAudioTranscriptionModel(openAiAudioApi);\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Wanna tweak things further? Use ",(0,r.jsx)(n.code,{children:"OpenAiAudioSpeechOptions"})," like a boss:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'OpenAiAudioTranscriptionOptions options = OpenAiAudioTranscriptionOptions.builder()\n  .withLanguage("en")\n  .withPrompt("Create transcription for this audio file.")\n  .withTemperature(0f)\n  .withResponseFormat(TranscriptResponseFormat.TEXT)\n  .build();\n\nvar openAiAudioApi = new OpenAiAudioApi(System.getenv("OPENAI_API_KEY"));\nvar transcriptionModel = new OpenAiAudioTranscriptionModel(openAiAudioApi, options);\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3\ufe0f\u20e3-speech-to-text-transcription-example-\ufe0f",children:"3\ufe0f\u20e3 Speech-to-Text Transcription Example \ud83c\udfa4\u27a1\ufe0f\ud83d\udcdc"}),"\n",(0,r.jsxs)(n.p,{children:["Time to put it all together! Use the ",(0,r.jsx)(n.code,{children:"call()"})," method to transcribe an audio file."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Value("classpath:speech.mp3")\nResource audioFile;\n\nAudioTranscriptionResponse response = transcriptionModel.call(new AudioTranscriptionPrompt(audioFile));\nString text = response.getResult().getOutput();\n'})}),"\n",(0,r.jsx)(n.p,{children:"Or integrate it into a REST API:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@RestController\npublic class OpenAiSpeechToTextController {\n\n    private final OpenAiAudioTranscriptionModel transcriptionModel;\n\n    @Autowired\n    public OpenAiSpeechToTextController(OpenAiAudioTranscriptionModel transcriptionModel) {\n        this.transcriptionModel = transcriptionModel;\n    }\n\n    @GetMapping("/transcription")\n    public String getSpeechToText(@Value("classpath:speech.mp3") Resource audioFile) {\n        return transcriptionModel.call(new AudioTranscriptionPrompt(audioFile))\n                .getResult()\n                .getOutput();\n    }\n\n    @GetMapping("/transcription_v2")\n    public String getSpeechToTextDetails(@Value("classpath:speech.mp3") Resource audioFile) {\n\n        var transcriptionOptions = OpenAiAudioTranscriptionOptions.builder()\n                .responseFormat(OpenAiAudioApi.TranscriptResponseFormat.TEXT)\n                .temperature(0f)\n                .build();\n\n        var transcriptionResponse = transcriptionModel\n                .call(new AudioTranscriptionPrompt(audioFile, transcriptionOptions));\n        return transcriptionResponse.getResult().getOutput();\n    }\n\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udd0a ",(0,r.jsx)(n.strong,{children:"Note:"})," We\u2019re using ",(0,r.jsx)(n.code,{children:"speech.mp3"})," for demo purposes. Replace it with your own files!"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4\ufe0f\u20e3-summary-what-we-learned-today-",children:"4\ufe0f\u20e3 Summary: What We Learned Today \ud83c\udf93"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Spring AI ",(0,r.jsx)(n.strong,{children:"only"})," supports OpenAI\u2019s Whisper model for now."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"OpenAiAudioTranscriptionModel"})})," is your go-to class for transcriptions."]}),"\n",(0,r.jsxs)(n.li,{children:["Just add ",(0,r.jsx)(n.code,{children:"spring-ai-openai-spring-boot-starter"}),", and boom \ud83d\udca5\u2014you\u2019re good to go!"]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"application.properties"})," to tweak the default configurations."]}),"\n",(0,r.jsxs)(n.li,{children:["Prefer manual control? Use the ",(0,r.jsx)(n.code,{children:"OpenAiAudioTranscriptionOptions"})," builder."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83c\udf89 ",(0,r.jsx)(n.strong,{children:"Now go forth and transcribe like a pro!"})," \ud83c\udf99\ufe0f\u2728"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"_Happy Learning!"})," \ud83d\ude80_"]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},9666:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/spring_ai_logo-85ebfad6246caa6a26060f054d26ebc8.png"},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var t=i(6540);const r={},o=t.createContext(r);function s(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);