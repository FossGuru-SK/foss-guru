"use strict";(self.webpackChunkfoss_guru=self.webpackChunkfoss_guru||[]).push([[849],{6528:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"kits/spring-ai/Vector Store/chroma-db","title":"ChromaDB","description":"In Spring AI, the role of a vector database is to store vector embeddings and facilitate similarity searches for these embeddings. Learn with examples.","source":"@site/community/kits/spring-ai/Vector Store/chroma-db.md","sourceDirName":"kits/spring-ai/Vector Store","slug":"/kits/spring-ai/Vector Store/chroma-db","permalink":"/foss-guru/community/kits/spring-ai/Vector Store/chroma-db","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"chroma-db","title":"ChromaDB","description":"In Spring AI, the role of a vector database is to store vector embeddings and facilitate similarity searches for these embeddings. Learn with examples.","sidebar_position":2},"sidebar":"community","previous":{"title":"PgVector Store","permalink":"/foss-guru/community/kits/spring-ai/Vector Store/pg-vector"},"next":{"title":"Python Kit","permalink":"/foss-guru/community/category/python-kit"}}');var s=n(4848),o=n(8453);const i={id:"chroma-db",title:"ChromaDB",description:"In Spring AI, the role of a vector database is to store vector embeddings and facilitate similarity searches for these embeddings. Learn with examples.",sidebar_position:2},a=void 0,c={},d=[{value:"\ud83d\ude80 Spring AI &amp; Vector Databases: A Fun Ride into the World of AI-Powered Search",id:"-spring-ai--vector-databases-a-fun-ride-into-the-world-of-ai-powered-search",level:2},{value:"\ud83e\udd16 What is a Vector Database?",id:"-what-is-a-vector-database",level:2},{value:"\ud83e\uddd0 What\u2019s a Vector?",id:"-whats-a-vector",level:3},{value:"\ud83d\udd0e How Does a Vector Database Work?",id:"-how-does-a-vector-database-work",level:3},{value:"\ud83c\udf31 Spring AI &amp; The VectorStore Interface",id:"-spring-ai--the-vectorstore-interface",level:2},{value:"\ud83d\udce5 Storing &amp; Querying Documents",id:"-storing--querying-documents",level:2},{value:"\ud83d\uddc4\ufe0f Storing Documents",id:"\ufe0f-storing-documents",level:3},{value:"\ud83d\udd0d Searching for Similar Documents",id:"-searching-for-similar-documents",level:3},{value:"\ud83d\udee0\ufe0f SimpleVectorStore: A No-Fuss Demo Store",id:"\ufe0f-simplevectorstore-a-no-fuss-demo-store",level:2},{value:"\ud83d\udd25 Vector Store Demo with ChromaDB",id:"-vector-store-demo-with-chromadb",level:2},{value:"\ud83c\udfd7\ufe0f Step 1: Setup ChromaDB with Docker Compose",id:"\ufe0f-step-1-setup-chromadb-with-docker-compose",level:3},{value:"\ud83d\udce6 Step 2: Add Dependencies",id:"-step-2-add-dependencies",level:3},{value:"\ud83d\udcd6 Step 3: Load Data into Vector Store",id:"-step-3-load-data-into-vector-store",level:3},{value:"\ud83d\udd0e Step 4: Perform Similarity Search",id:"-step-4-perform-similarity-search",level:3},{value:"\ud83c\udf89 Conclusion",id:"-conclusion",level:2}];function l(e){const t={code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Banner Spring AI Icon",src:n(8107).A+"",width:"1022",height:"239"})}),"\n",(0,s.jsx)(t.h2,{id:"-spring-ai--vector-databases-a-fun-ride-into-the-world-of-ai-powered-search",children:"\ud83d\ude80 Spring AI & Vector Databases: A Fun Ride into the World of AI-Powered Search"}),"\n",(0,s.jsx)(t.h2,{id:"-what-is-a-vector-database",children:"\ud83e\udd16 What is a Vector Database?"}),"\n",(0,s.jsxs)(t.p,{children:["Imagine you're Sherlock Holmes, but instead of a magnifying glass, you have a powerful AI that finds related stuff in a giant pile of data! \ud83d\udd75\ufe0f\u200d\u2642\ufe0f That\u2019s what a vector database does! It stores ",(0,s.jsx)(t.strong,{children:"vector embeddings"})," (fancy term for long lists of numbers) and helps with similarity searches. But hold on, a vector store doesn't ",(0,s.jsx)(t.strong,{children:"create"})," the embeddings\u2014it just ",(0,s.jsx)(t.strong,{children:"stores"})," them. To create these magical vectors, you need an ",(0,s.jsx)(t.strong,{children:"EmbeddingModel"}),"."]}),"\n",(0,s.jsx)(t.h3,{id:"-whats-a-vector",children:"\ud83e\uddd0 What\u2019s a Vector?"}),"\n",(0,s.jsxs)(t.p,{children:["A vector is basically a ",(0,s.jsx)(t.strong,{children:"super-smart list of numbers"})," that represents things like text, images, audio, or even your pet\u2019s mood (ok, maybe not that last one). Each number in a vector represents different attributes like sentiment, intensity, and context."]}),"\n",(0,s.jsxs)(t.p,{children:["By calculating distances between these vectors, we can find similarities. This process is called ",(0,s.jsx)(t.strong,{children:"semantic search"}),"\u2014because it\u2019s not just searching words, it\u2019s searching ",(0,s.jsx)(t.em,{children:"meaning"}),"!"]}),"\n",(0,s.jsx)(t.h3,{id:"-how-does-a-vector-database-work",children:"\ud83d\udd0e How Does a Vector Database Work?"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Data Storage:"})," Your raw data (text, images, videos, etc.) gets transformed into vectors using an AI model and stored."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Data Retrieval:"})," When you search, your query is converted into a vector, and the database finds the most similar vectors."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Calculating Similarity:"})," Various formulas are used to find the \u2018closeness\u2019 of two vectors:","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Euclidean Distance"}),": Straight-line distance between two vectors."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Cosine Similarity"}),": Measures the angle between vectors."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Manhattan Distance"}),": The sum of absolute differences between vector components."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Jaccard Similarity"}),": Measures overlap between two sets."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Popular vector databases include ",(0,s.jsx)(t.strong,{children:"Pinecone, Elasticsearch, Chroma, Weaviate, and Quadrant"}),". Some are open-source, some are startups, and all are pretty cool! \ud83d\ude0e"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"-spring-ai--the-vectorstore-interface",children:"\ud83c\udf31 Spring AI & The VectorStore Interface"}),"\n",(0,s.jsxs)(t.p,{children:["In Spring AI, the ",(0,s.jsx)(t.strong,{children:"VectorStore"})," interface is your go-to tool for working with vector databases. It helps you store documents and perform similarity searches. Here\u2019s what it looks like:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:"public interface VectorStore {\n  void add(List<Document> documents);\n  Optional<Boolean> delete(List<String> idList);\n  List<Document> similaritySearch(String query);\n  List<Document> similaritySearch(SearchRequest request);\n}\n"})}),"\n",(0,s.jsxs)(t.p,{children:["And the ",(0,s.jsx)(t.strong,{children:"Document"})," class:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:"public class Document implements Content {\n    private Map<String, Object> metadata;\n    private String content;\n    private List<Double> embedding = new ArrayList<>();\n    //...\n}\n"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"-storing--querying-documents",children:"\ud83d\udce5 Storing & Querying Documents"}),"\n",(0,s.jsxs)(t.p,{children:["Spring Boot makes life easy by ",(0,s.jsx)(t.strong,{children:"autoconfiguring"})," a ",(0,s.jsx)(t.code,{children:"VectorStore"})," bean when it detects a vector database starter module. Example:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:"@Autowired\nVectorStore vectorStore;\n"})}),"\n",(0,s.jsx)(t.h3,{id:"\ufe0f-storing-documents",children:"\ud83d\uddc4\ufe0f Storing Documents"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'List<Document> documents = List.of(\n    new Document("...content..."),\n    new Document("...content..."),\n    new Document("...content...")\n);\nvectorStore.add(documents);\n'})}),"\n",(0,s.jsx)(t.h3,{id:"-searching-for-similar-documents",children:"\ud83d\udd0d Searching for Similar Documents"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'List<Document> results = vectorStore.similaritySearch(\n    SearchRequest.query("...search-terms...").withTopK(5)\n);\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Spring AI supports ",(0,s.jsx)(t.strong,{children:"multiple vector databases"}),", and more will be added in the future. Check the official docs for the latest list. \ud83d\udcdc"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"\ufe0f-simplevectorstore-a-no-fuss-demo-store",children:"\ud83d\udee0\ufe0f SimpleVectorStore: A No-Fuss Demo Store"}),"\n",(0,s.jsxs)(t.p,{children:["For quick demos, use ",(0,s.jsx)(t.strong,{children:"SimpleVectorStore"}),"\u2014a lightweight version of a vector store, similar to H2 for relational databases."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:"public class SimpleVectorStore implements VectorStore {\n    public void add(List<Document> documents) {...}\n    public List<Document> similaritySearch(SearchRequest request) {...}\n    public void save(File file) {...}\n    public void load(File file) {...}\n    public void load(Resource resource) {...}\n    //...\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"To use it:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:"@Bean\nSimpleVectorStore vectorStore(EmbeddingModel embeddingModel) {\n    return new SimpleVectorStore(embeddingModel);\n}\n"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"-vector-store-demo-with-chromadb",children:"\ud83d\udd25 Vector Store Demo with ChromaDB"}),"\n",(0,s.jsxs)(t.p,{children:["Let's see ",(0,s.jsx)(t.strong,{children:"Spring AI in action"})," by setting up a ",(0,s.jsx)(t.strong,{children:"ChromaDB"}),"-powered vector store."]}),"\n",(0,s.jsx)(t.h3,{id:"\ufe0f-step-1-setup-chromadb-with-docker-compose",children:"\ud83c\udfd7\ufe0f Step 1: Setup ChromaDB with Docker Compose"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"version: '3.9'\n\nnetworks:\n  net:\n    driver: bridge\n\nservices:\n  server:\n    image: ghcr.io/chroma-core/chroma:latest\n    environment:\n      - IS_PERSISTENT=TRUE\n    volumes:\n      - chroma-data:/chroma/chroma/\n    ports:\n      - 8000:8000\n    networks:\n      - net\n\nvolumes:\n  chroma-data:\n    driver: local\n"})}),"\n",(0,s.jsx)(t.h3,{id:"-step-2-add-dependencies",children:"\ud83d\udce6 Step 2: Add Dependencies"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-xml",children:"<dependency>\n  <groupId>org.springframework.ai</groupId>\n  <artifactId>spring-ai-openai-spring-boot-starter</artifactId>\n</dependency>\n<dependency>\n  <groupId>org.springframework.ai</groupId>\n  <artifactId>spring-ai-chroma-store-spring-boot-starter</artifactId>\n</dependency>\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-docker-compose</artifactId>\n  <scope>runtime</scope>\n  <optional>true</optional>\n</dependency>\n"})}),"\n",(0,s.jsx)(t.h3,{id:"-step-3-load-data-into-vector-store",children:"\ud83d\udcd6 Step 3: Load Data into Vector Store"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'@Component\npublic class VectorStoreLoader implements ApplicationRunner {\n    @Autowired\n    VectorStore vectorStore;\n\n    @Override\n    public void run(ApplicationArguments args) throws Exception {\n        List<Document> documents = new ArrayList<>();\n        TikaDocumentReader reader = new TikaDocumentReader(new ClassPathResource("CallingRates.pdf"));\n        documents.addAll(reader.get());\n        vectorStore.add(documents);\n\n        System.out.println("Added documents to vector store");\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"-step-4-perform-similarity-search",children:"\ud83d\udd0e Step 4: Perform Similarity Search"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'List<Document> documents = vectorStore.similaritySearch("investigation");\ndocuments.stream().forEach(System.out::println);\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Output:"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:"Document{id='7cec17aa-...', metadata={source=story.md, distance=0.7674138}, content='...', media=[]}\nDocument{id='42726cdb-...', metadata={source=story.text, distance=0.8732333}, content='...', media=[]}\nDocument{id='9aad7daa-...', metadata={source=story.pdf, distance=0.8799484}, content='...', media=[]}\n"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"-conclusion",children:"\ud83c\udf89 Conclusion"}),"\n",(0,s.jsxs)(t.p,{children:["We explored the magical world of vector databases and how ",(0,s.jsx)(t.strong,{children:"Spring AI"})," makes it easier to work with them. From storing and querying vectors to setting up ",(0,s.jsx)(t.strong,{children:"ChromaDB"})," with ",(0,s.jsx)(t.strong,{children:"Docker Compose"}),", we\u2019ve seen how you can integrate vector search into your applications."]}),"\n",(0,s.jsxs)(t.p,{children:["\ud83d\ude80 ",(0,s.jsx)(t.strong,{children:"Go forth and build amazing AI-powered search applications!"})]}),"\n",(0,s.jsx)(t.p,{children:"Happy Coding! \u2728\ud83c\udf8a"})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8107:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/spring_ai_logo-85ebfad6246caa6a26060f054d26ebc8.png"},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var r=n(6540);const s={},o=r.createContext(s);function i(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);