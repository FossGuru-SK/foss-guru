"use strict";(self.webpackChunkfoss_guru=self.webpackChunkfoss_guru||[]).push([[5199],{8053:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"kits/spring-ai/Model/speech-model","title":"Spring AI SpeechModel (Text-to-Speech)","description":"In Spring AI, SpeechModel and StreamingSpeechModel interfaces allow to interact with Text-to-Speech APIs of supported LLMs such as tts-1 by OpenAI.","source":"@site/community/kits/spring-ai/Model/speech-model.md","sourceDirName":"kits/spring-ai/Model","slug":"/kits/spring-ai/Model/speech-model","permalink":"/foss-guru/community/kits/spring-ai/Model/speech-model","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"speech-model","title":"Spring AI SpeechModel (Text-to-Speech)","description":"In Spring AI, SpeechModel and StreamingSpeechModel interfaces allow to interact with Text-to-Speech APIs of supported LLMs such as tts-1 by OpenAI.","sidebar_position":3},"sidebar":"community","previous":{"title":"Spring AI ImageModel (Text-to-Image)","permalink":"/foss-guru/community/kits/spring-ai/Model/image-model"},"next":{"title":"Spring AI Speech to Text Example","permalink":"/foss-guru/community/kits/spring-ai/Model/speech-to-text"}}');var t=i(4848),o=i(8453);const a={id:"speech-model",title:"Spring AI SpeechModel (Text-to-Speech)",description:"In Spring AI, SpeechModel and StreamingSpeechModel interfaces allow to interact with Text-to-Speech APIs of supported LLMs such as tts-1 by OpenAI.",sidebar_position:3},r=void 0,l={},p=[{value:"\ud83c\udfa4 Spring AI Text-to-Speech (TTS) \u2013 Making Your App Talk Like a Pro",id:"-spring-ai-text-to-speech-tts--making-your-app-talk-like-a-pro",level:2},{value:"\ud83c\udf99\ufe0f 1. SpeechModel &amp; StreamingSpeechModel \u2013 The Talkative Duo",id:"\ufe0f-1-speechmodel--streamingspeechmodel--the-talkative-duo",level:2},{value:"\ud83d\udd25 Who&#39;s in Charge?",id:"-whos-in-charge",level:3},{value:"\ud83d\ude80 2. Getting Started \u2013 Let\u2019s Set Things Up",id:"-2-getting-started--lets-set-things-up",level:2},{value:"\ud83d\udee0\ufe0f Default Configurations",id:"\ufe0f-default-configurations",level:3},{value:"\ud83c\udfaf Injecting the Speech Model",id:"-injecting-the-speech-model",level:3},{value:"\ud83c\udfa9 3. Creating a SpeechModel Programmatically (Because We Can!)",id:"-3-creating-a-speechmodel-programmatically-because-we-can",level:2},{value:"\ud83c\udfb6 4. Converting Text to Speech \u2013 The Real Deal",id:"-4-converting-text-to-speech--the-real-deal",level:2},{value:"\ud83d\udd25 Example Controller",id:"-example-controller",level:3},{value:"\ud83c\udfa7 5. Streaming Speech \u2013 For the Real Pros",id:"-5-streaming-speech--for-the-real-pros",level:2},{value:"\ud83c\udfac What Happens?",id:"-what-happens",level:3},{value:"\ud83c\udfaf 6. The Grand Finale \u2013 What Did We Learn?",id:"-6-the-grand-finale--what-did-we-learn",level:2}];function c(e){const n={blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Banner Spring AI Icon",src:i(8107).A+"",width:"1022",height:"239"})}),"\n",(0,t.jsx)(n.h2,{id:"-spring-ai-text-to-speech-tts--making-your-app-talk-like-a-pro",children:"\ud83c\udfa4 Spring AI Text-to-Speech (TTS) \u2013 Making Your App Talk Like a Pro"}),"\n",(0,t.jsxs)(n.p,{children:["Ever wanted your app to have a smooth, life-like voice? \ud83c\udfb6 Well, you're in luck! Spring AI makes it super easy to convert text into speech using OpenAI\u2019s TTS models like ",(0,t.jsx)(n.code,{children:"tts-1"})," and ",(0,t.jsx)(n.code,{children:"tts-1-hd"}),". So, let's dive in and make our apps a little chattier! \ud83d\ude03"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-1-speechmodel--streamingspeechmodel--the-talkative-duo",children:"\ud83c\udf99\ufe0f 1. SpeechModel & StreamingSpeechModel \u2013 The Talkative Duo"}),"\n",(0,t.jsxs)(n.p,{children:["Spring AI gives us ",(0,t.jsx)(n.strong,{children:"two powerful interfaces"})," to bring our text to life:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SpeechModel"}),": Converts text into speech and returns an audio file. Simple and sweet! \ud83c\udf6c"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"StreamingSpeechModel"}),": Streams audio in real-time for that podcast-like feel. \ud83c\udfa7"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-whos-in-charge",children:"\ud83d\udd25 Who's in Charge?"}),"\n",(0,t.jsxs)(n.p,{children:["Meet ",(0,t.jsx)(n.strong,{children:"OpenAiAudioSpeechModel"})," \u2013 the class that implements both interfaces:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public class OpenAiAudioSpeechModel implements SpeechModel, StreamingSpeechModel {\n    // Magic happens here!\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-2-getting-started--lets-set-things-up",children:"\ud83d\ude80 2. Getting Started \u2013 Let\u2019s Set Things Up"}),"\n",(0,t.jsx)(n.p,{children:"Before we make your app talk, we need to add some secret sauce:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<dependency>\n  <groupId>org.springframework.ai</groupId>\n  <artifactId>spring-ai-openai-spring-boot-starter</artifactId>\n</dependency>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\ufe0f-default-configurations",children:"\ud83d\udee0\ufe0f Default Configurations"}),"\n",(0,t.jsx)(n.p,{children:"Spring Boot does the heavy lifting, but you can tweak settings to match your vibe:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"# API Key is mandatory!\nspring.ai.openai.api-key=${OPENAI_API_KEY}  \n\n# Customize your voice\nspring.ai.openai.audio.speech=tts-1\nspring.ai.openai.audio.speech.options.voice=alloy  # Choose from alloy, echo, fable, onyx, nova, or shimmer\nspring.ai.openai.audio.speech.options.response-format=mp3  # Available: mp3, opus, aac, flac, wav, pcm\nspring.ai.openai.audio.speech.options.speed=1.0  # Speed it up or slow it down (0.0 - 1.0)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"-injecting-the-speech-model",children:"\ud83c\udfaf Injecting the Speech Model"}),"\n",(0,t.jsx)(n.p,{children:"Want your controller to talk? Just inject the SpeechModel like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@RestController\npublic class OpenAiSpeechController {\n\n    private final OpenAiAudioSpeechModel speechModel;\n\n    @Autowired\n    public OpenAiSpeechController(OpenAiAudioSpeechModel speechModel) {\n        this.speechModel = speechModel;\n    }\n\n    @GetMapping("/ask/speech")\n    public byte[] generateSpeechFromText(@RequestParam(value = "message", defaultValue = "I am cool AI assitantce") String message) {\n        return speechModel.call(message);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-3-creating-a-speechmodel-programmatically-because-we-can",children:"\ud83c\udfa9 3. Creating a SpeechModel Programmatically (Because We Can!)"}),"\n",(0,t.jsx)(n.p,{children:"Don\u2019t want to rely on auto-config? No worries \u2013 do it yourself:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'var openAiAudioApi = new OpenAiAudioApi(System.getenv("OPENAI_API_KEY"));\nvar speechModel = new OpenAiAudioSpeechModel(openAiAudioApi);\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Want a custom voice and format? Fine-tune it with ",(0,t.jsx)(n.strong,{children:"OpenAiAudioSpeechOptions"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'OpenAiAudioSpeechOptions speechOptions = OpenAiAudioSpeechOptions.builder()\n  .withModel(OpenAiAudioApi.TtsModel.TTS_1.getValue())\n  .withResponseFormat(AudioResponseFormat.MP3)\n  .withVoice(OpenAiAudioApi.SpeechRequest.Voice.ALLOY)\n  .withSpeed(1.0f)\n  .build();\n\nvar openAiAudioApi = new OpenAiAudioApi(System.getenv("OPENAI_API_KEY"));\nSpeechModel speechModel = new OpenAiAudioSpeechModel(openAiAudioApi, speechOptions);\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-4-converting-text-to-speech--the-real-deal",children:"\ud83c\udfb6 4. Converting Text to Speech \u2013 The Real Deal"}),"\n",(0,t.jsxs)(n.p,{children:["Enough talk (ironically) \u2013 let\u2019s ",(0,t.jsx)(n.strong,{children:"convert text into speech!"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"SpeechResponse speechResponse = speechModel.call(new SpeechPrompt(message));\nbyte[] audio = speechResponse.getResult().getOutput();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"-example-controller",children:"\ud83d\udd25 Example Controller"}),"\n",(0,t.jsx)(n.p,{children:"Want to turn any text into an MP3 file? Here you go:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@RestController\npublic class OpenAiSpeechController {\n\n    private final OpenAiAudioSpeechModel speechModel;\n\n    @Autowired\n    public OpenAiSpeechController(OpenAiAudioSpeechModel speechModel) {\n        this.speechModel = speechModel;\n    }\n\n    @GetMapping("/ask/speech")\n    public byte[] generateSpeechFromText(@RequestParam(value = "message", defaultValue = "I am cool AI assitantce") String message) {\n        return speechModel.call(message);\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udd0d ",(0,t.jsx)(n.strong,{children:"How to Test?"})," Fire up Postman and send a POST request to ",(0,t.jsx)(n.code,{children:"/speech"})," with a text body. Listen to your app speak! \ud83c\udfa4"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-5-streaming-speech--for-the-real-pros",children:"\ud83c\udfa7 5. Streaming Speech \u2013 For the Real Pros"}),"\n",(0,t.jsxs)(n.p,{children:["Want real-time, low-latency streaming (like live radio)? Say hello to ",(0,t.jsx)(n.code,{children:"stream()"}),"!"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@GetMapping("/stream-speech")\n    Flux<SpeechResponse> streamingSpeech(@RequestParam String message) {\n        var openAiAudioApi = new OpenAiAudioApi(System.getenv("OPENAI_API_KEY"));\n\n        var openAiAudioSpeechModel = new OpenAiAudioSpeechModel(openAiAudioApi);\n\n        OpenAiAudioSpeechOptions speechOptions = OpenAiAudioSpeechOptions.builder()\n                .voice(OpenAiAudioApi.SpeechRequest.Voice.ALLOY)\n                .speed(1.0f)\n                .responseFormat(OpenAiAudioApi.SpeechRequest.AudioResponseFormat.MP3)\n                .model(OpenAiAudioApi.TtsModel.TTS_1.value)\n                .build();\n\n        SpeechPrompt speechPrompt = new SpeechPrompt("Today is a wonderful day to build something people love!", speechOptions);\n\n        Flux<SpeechResponse> responseStream = openAiAudioSpeechModel.stream(speechPrompt);\n        return responseStream;\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:'Note: OpenAiAudioApi getting deprecated since = "1.0.0-M6"'}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-what-happens",children:"\ud83c\udfac What Happens?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The response is sent ",(0,t.jsx)(n.strong,{children:"in chunks"}),", perfect for streaming audio like a ",(0,t.jsx)(n.strong,{children:"live narrator"}),"! \ud83d\udcfb"]}),"\n",(0,t.jsxs)(n.li,{children:["Try calling ",(0,t.jsx)(n.code,{children:"/stream-speech"})," in the browser \u2013 you\u2019ll see the ",(0,t.jsx)(n.strong,{children:"audio streaming in real-time"}),"!"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-6-the-grand-finale--what-did-we-learn",children:"\ud83c\udfaf 6. The Grand Finale \u2013 What Did We Learn?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Spring AI + OpenAI = Magic!"})," \u2728"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SpeechModel"})," converts text into full audio files."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"StreamingSpeechModel"})," provides real-time speech streaming."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Configuration is easy"})," with Spring Boot auto-config."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Customization is king"})," \u2013 choose your voice, format, and speed."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,t.jsx)(n.strong,{children:"Now go make your app talk!"})," \ud83c\udf99\ufe0f\ud83d\udd25"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"Happy Coding & Keep Talking!"})," \ud83e\udd73\ud83c\udfa4"]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8107:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/spring_ai_logo-85ebfad6246caa6a26060f054d26ebc8.png"},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var s=i(6540);const t={},o=s.createContext(t);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);